var Operations={power:{type:"power",operation:function(r){return Math.pow(r,2)}},root:{type:"root",operation:function(r){return Math.sqrt(r)}},reciprocal:{type:"reciprocal",operation:function(r){return 1/r}},factorial:{type:"factorial",operation:function(r){if(Math.floor(r)==r&&r>=0){for(var o=1,t=2;t<=r;t++)o*=t;return r=o}return r}},changeSign:{type:"changeSign",operation:function(r){return r<0?Math.abs(r):r>0?r-2*r:void 0}}};
!function(){function classForAWhile(e,t,n){e.classList.add(t),setTimeout(function(){e.classList.remove(t)},n)}function threeSpaces(e){if(e==1/0)return e;if(e=e.replace(/ /g,""),e.indexOf(".")>-1){var t=e.indexOf("."),n=e.substring(0,t),a=e.substring(t);n=String(n).split("");for(var l=n.length,o=3;o<l;o+=3)n.splice(l-o,0," ");return n=n.join(""),e=n+a}e=String(e).split(""),l=e.length;for(var o=3;o<l;o+=3)e.splice(l-o,0," ");return e.join("")}function changeFontSize(e){if(checkOverflow(e)){var t=e.style.fontSize;t=t.substring(0,t.length-2),t-=1,t+="px",e.style.fontSize=t,changeFontSize(e)}}function checkOverflow(e){var t=e.style.overflow;t&&"visible"!==t||(e.style.overflow="hidden");var n=e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight;return e.style.overflow=t,n}for(var operand1="",operand2="",toEval="",wynik="",operationClicked=!1,calcDone=!1,button=document.getElementsByTagName("button"),result=document.getElementById("result"),sum=document.getElementById("sum"),basicOperations=document.getElementsByClassName("operations"),one=document.querySelector(".numbers[value='1']"),two=document.querySelector(".numbers[value='2']"),three=document.querySelector(".numbers[value='3']"),four=document.querySelector(".numbers[value='4']"),five=document.querySelector(".numbers[value='5']"),six=document.querySelector(".numbers[value='6']"),seven=document.querySelector(".numbers[value='7']"),eight=document.querySelector(".numbers[value='8']"),nine=document.querySelector(".numbers[value='9']"),zero=document.querySelector(".numbers[value='0']"),del=document.querySelector(".clear"),add=document.querySelector(".operations[value='+']"),subt=document.querySelector(".operations[value='-']"),divis=document.querySelector(".operations[value='/']"),multi=document.querySelector(".operations[value='*']"),equal=document.querySelector(".score[value='=']"),dot=document.querySelector(".numbers[value='.']"),oneDigit=document.querySelector(".deleteOneDigit"),TypeOfButton={numbers:{type:"numbers",action:function(e){operand1.indexOf(".")>-1&&"."==e.value||"0"==operand1&&"0"==e.value||(("0"==result.value&&"."!=e.value||operationClicked||calcDone)&&(result.value=""),""==sum.textContent&&"."==e.value?sum.textContent="0":operand2&&!operand1&&"."==e.value&&(sum.textContent+="0",result.value+="0"),"0"==sum.textContent&&"."!=e.value&&(sum.textContent=sum.textContent.substring(0,sum.textContent.length-1)),calcDone?(operand1=e.value,result.value=e.value,toEval=e.value,sum.textContent=e.value):(operand1+=e.value,toEval+=e.value,result.value+=e.value,result.value=threeSpaces(result.value),sum.textContent+=e.value),operationClicked=!1,calcDone=!1)}},operations:{type:"operations",action:function(e){if(operand1||operand2){for(operationClicked||isNaN(toEval.charAt(toEval.length-1))?(toEval=toEval.substring(0,toEval.length-1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-1),result.value=result.value.substring(0,result.value.length-1)):(operand2=operand1,operand1=""),wynik=eval(toEval),wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),toEval=wynik,result.value=threeSpaces(wynik),calcDone?sum.textContent=toEval+e.value:sum.textContent+=e.value,toEval+=e.value,operationClicked=!0,calcDone=!1}}},score:{type:"score",action:function(){if(!calcDone&&toEval){for(var i=0;i<basicOperations.length;i++)toEval.charAt(toEval.length-1)==basicOperations[i].value&&(toEval=toEval.substring(0,toEval.length-1));for(wynik=eval(toEval),wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),result.value=threeSpaces(wynik),sum.textContent="",operand1=wynik,operand2="",toEval=wynik,operationClicked=!1,calcDone=!0}}},clear:{type:"clear",action:function(){operand1="",operand2="",toEval="",operationClicked=!1,result.value="0",sum.textContent=""}},deleteOneDigit:{type:"deleteOneDigit",action:function(){calcDone||isNaN(toEval.charAt(toEval.length-1))&&"."!=toEval.charAt(toEval.length-1)||(toEval=toEval.substring(0,toEval.length-1),result.value=result.value.replace(/ /g,""),result.value=result.value.substring(0,result.value.length-1),result.value=threeSpaces(result.value),sum.textContent=sum.textContent.substring(0,sum.textContent.length-1),operand1=operand1.substring(0,operand1.length-1),""==result.value&&(result.value="0"))}},deleteLastNumber:{type:"deleteLastNumber",action:function(){if(operand1||operand2){var e=operand1.length;toEval=toEval.substring(0,toEval.length-e),result.value="0",sum.textContent=sum.textContent.substring(0,sum.textContent.length-e),operand1=""}calcDone&&TypeOfButton.clear.action()}},oneNumberOperations:{type:"oneNumberOperations",action:function(e){if(operand1)for(var t in Operations)if(e.value==Operations[t].type){var n=operand1.length;if("."==operand1.charAt(0))var a=n+1;else a=n;for(operand1=Operations[t].operation(operand1),wynik=operand1,wynik=parseFloat(wynik),wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),operand1=wynik,toEval=toEval.substring(0,toEval.length-n),toEval+=operand1,result.value=threeSpaces(operand1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-a),sum.textContent+=operand1}}}},i=0;i<button.length;i++)button[i].addEventListener("click",function(e){e=e||window.event;for(var t in TypeOfButton)this.classList.contains(TypeOfButton[t].type)&&TypeOfButton[t].action(e.target);classForAWhile(e.target,"active",300),result.style.fontSize="70px",sum.style.fontSize="30px",changeFontSize(sum),changeFontSize(result)},!1);document.addEventListener("keydown",function(e){if(e=e||window.event,e.key)switch(e.key){case"1":one.click();break;case"2":two.click();break;case"3":three.click();break;case"4":four.click();break;case"5":five.click();break;case"6":six.click();break;case"7":seven.click();break;case"8":eight.click();break;case"9":nine.click();break;case"0":zero.click();break;case"Delete":del.click();break;case"+":add.click();break;case"-":subt.click();break;case"/":divis.click();break;case"*":multi.click();break;case"Enter":equal.click();break;case",":case".":dot.click();break;case"Backspace":oneDigit.click()}else switch(e.keyCode){case"97":one.click();break;case"98":two.click();break;case"99":three.click();break;case"100":four.click();break;case"101":five.click();break;case"102":six.click();break;case"103":seven.click();break;case"104":eight.click();break;case"105":nine.click();break;case"96":zero.click();break;case"46":del.click();break;case"107":add.click();break;case"109":subt.click();break;case"111":divis.click();break;case"106":multi.click();break;case"13":equal.click();break;case"110":case"188":case"190":dot.click();break;case"8":oneDigit.click()}})}();