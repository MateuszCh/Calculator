!function(){function classForAWhile(t,n,e){t.classList.add(n),setTimeout(function(){t.classList.remove(n)},e)}function mask(t){if(t=t.replace(/ /g,""),console.log("po usuniÄ™ciu spacji:"+t),t.indexOf(".")>-1){var n=t.indexOf("."),e=t.substring(0,n),o=t.substring(n);e=String(e).split("");for(var a=e.length,i=3;i<a;i+=3)e.splice(a-i,0," ");return e=e.join(""),t=e+o}t=String(t).split(""),a=t.length;for(var i=3;i<a;i+=3)t.splice(a-i,0," ");return t.join("")}for(var operand1="",operand2="",toEval="",operationClicked=!1,button=document.getElementsByTagName("button"),result=document.getElementById("result"),sum=document.getElementById("sum"),calcDone=!1,basicOperations=document.getElementsByClassName("operations"),wynik,TypeOfButton={numbers:{type:"numbers",action:function(t){operand1.indexOf(".")>-1&&"."==t.value||"0"==operand1&&"0"==t.value||(("0"==result.textContent&&"."!=t.value||operationClicked||calcDone)&&(result.textContent=""),""==sum.textContent&&"."==t.value?sum.textContent="0":operand2&&!operand1&&"."==t.value&&(sum.textContent+="0",result.textContent+="0"),"0"==sum.textContent&&"."!=t.value&&(sum.textContent=sum.textContent.substring(0,sum.textContent.length-1)),calcDone?(operand1=t.value,result.textContent=t.value,toEval=t.value,sum.textContent=t.value):(operand1+=t.value,toEval+=t.value,console.log("przed dodaniem: "+result.textContent),result.textContent+=t.value,console.log("po dodaniu: "+result.textContent),result.textContent=mask(result.textContent),console.log("po przemianie: "+result.textContent),sum.textContent+=t.value),operationClicked=!1,calcDone=!1,"00"==sum.textContent&&(sum.textContent="0"))}},operations:{type:"operations",action:function(e){if(operand1||operand2){for(operationClicked||isNaN(toEval.charAt(toEval.length-1))?(toEval=toEval.substring(0,toEval.length-1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-1),result.textContent=result.textContent.substring(0,result.textContent.length-1)):(operand2=operand1,operand1=""),wynik=eval(toEval),wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),toEval=wynik,result.textContent=mask(wynik),calcDone?sum.textContent=toEval+e.value:sum.textContent+=e.value,toEval+=e.value,operationClicked=!0,calcDone=!1}}},score:{type:"score",action:function(){if(!calcDone&&toEval){for(var i=0;i<basicOperations.length;i++)toEval.charAt(toEval.length-1)==basicOperations[i].value&&(toEval=toEval.substring(0,toEval.length-1));for(wynik=eval(toEval),wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),result.textContent=mask(wynik),sum.textContent="",operand1=wynik,operand2="",toEval=wynik,operationClicked=!1,calcDone=!0}}},clear:{type:"clear",action:function(){operand1="",operand2="",toEval="",operationClicked=!1,result.textContent="0",sum.textContent=""}},deleteOneDigit:{type:"deleteOneDigit",action:function(){calcDone||isNaN(toEval.charAt(toEval.length-1))&&"."!=toEval.charAt(toEval.length-1)||(toEval=toEval.substring(0,toEval.length-1),result.textContent=result.textContent.substring(0,result.textContent.length-1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-1),operand1=operand1.substring(0,operand1.length-1),""==result.textContent&&(result.textContent="0"))}},deleteLastNumber:{type:"deleteLastNumber",action:function(){if(operand1||operand2){var t=operand1.length;toEval=toEval.substring(0,toEval.length-t),result.textContent="0",sum.textContent=sum.textContent.substring(0,sum.textContent.length-t),operand1=""}calcDone&&TypeOfButton.clear.action()}},oneNumberOperations:{type:"oneNumberOperations",action:function(t){if(operand1)for(var n in Operations)if(t.value==Operations[n].type){var e=operand1.length;if("."==operand1.charAt(0))var o=e+1;else o=e;for(operand1=Operations[n].operation(operand1),wynik=operand1,wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),operand1=wynik,toEval=toEval.substring(0,toEval.length-e),toEval+=operand1,result.textContent=mask(operand1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-o),sum.textContent+=operand1}}}},i=0;i<button.length;i++)button[i].addEventListener("click",function(t){for(var n in TypeOfButton)this.classList.contains(TypeOfButton[n].type)&&TypeOfButton[n].action(t.target);classForAWhile(t.target,"active",300),console.log(operand1),console.log(toEval)},!1)}();