!function(){function classForAWhile(e,t,n){e.classList.add(t),setTimeout(function(){e.classList.remove(t)},n)}function mask(e){if(e=e.replace(/ /g,""),console.log("po usuniÄ™ciu spacji:"+e),e.indexOf(".")>-1){var t=e.indexOf("."),n=e.substring(0,t),o=e.substring(t);n=String(n).split("");for(var a=n.length,l=3;l<a;l+=3)n.splice(a-l,0," ");return n=n.join(""),e=n+o}e=String(e).split(""),a=e.length;for(var l=3;l<a;l+=3)e.splice(a-l,0," ");return e.join("")}for(var operand1="",operand2="",toEval="",operationClicked=!1,button=document.getElementsByTagName("button"),result=document.getElementById("result"),sum=document.getElementById("sum"),calcDone=!1,basicOperations=document.getElementsByClassName("operations"),wynik,TypeOfButton={numbers:{type:"numbers",action:function(e){operand1.indexOf(".")>-1&&"."==e.value||"0"==operand1&&"0"==e.value||(("0"==result.value&&"."!=e.value||operationClicked||calcDone)&&(result.value=""),""==sum.textContent&&"."==e.value?sum.textContent="0":operand2&&!operand1&&"."==e.value&&(sum.textContent+="0",result.values+="0"),"0"==sum.textContent&&"."!=e.value&&(sum.textContent=sum.textContent.substring(0,sum.textContent.length-1)),calcDone?(operand1=e.value,result.value=e.value,toEval=e.value,sum.textContent=e.value):(operand1+=e.value,toEval+=e.value,console.log("przed dodaniem: "+result.value),result.value+=e.value,console.log("po dodaniu: "+result.value),result.value=mask(result.value),console.log("po przemianie: "+result.value),sum.textContent+=e.value),operationClicked=!1,calcDone=!1,"00"==sum.textContent&&(sum.textContent="0"))}},operations:{type:"operations",action:function(e){if(operand1||operand2){for(operationClicked||isNaN(toEval.charAt(toEval.length-1))?(toEval=toEval.substring(0,toEval.length-1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-1),result.value=result.value.substring(0,result.value.length-1)):(operand2=operand1,operand1=""),wynik=eval(toEval),wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),toEval=wynik,result.value=mask(wynik),calcDone?sum.textContent=toEval+e.value:sum.textContent+=e.value,toEval+=e.value,operationClicked=!0,calcDone=!1}}},score:{type:"score",action:function(){if(!calcDone&&toEval){for(var i=0;i<basicOperations.length;i++)toEval.charAt(toEval.length-1)==basicOperations[i].value&&(toEval=toEval.substring(0,toEval.length-1));for(wynik=eval(toEval),wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),result.value=mask(wynik),sum.textContent="",operand1=wynik,operand2="",toEval=wynik,operationClicked=!1,calcDone=!0}}},clear:{type:"clear",action:function(){operand1="",operand2="",toEval="",operationClicked=!1,result.value="0",sum.textContent=""}},deleteOneDigit:{type:"deleteOneDigit",action:function(){calcDone||isNaN(toEval.charAt(toEval.length-1))&&"."!=toEval.charAt(toEval.length-1)||(toEval=toEval.substring(0,toEval.length-1),result.value=result.value.substring(0,result.value.length-1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-1),operand1=operand1.substring(0,operand1.length-1),""==result.value&&(result.value="0"))}},deleteLastNumber:{type:"deleteLastNumber",action:function(){if(operand1||operand2){var e=operand1.length;toEval=toEval.substring(0,toEval.length-e),result.value="0",sum.textContent=sum.textContent.substring(0,sum.textContent.length-e),operand1=""}calcDone&&TypeOfButton.clear.action()}},oneNumberOperations:{type:"oneNumberOperations",action:function(e){if(operand1)for(var t in Operations)if(e.value==Operations[t].type){var n=operand1.length;if("."==operand1.charAt(0))var o=n+1;else o=n;for(operand1=Operations[t].operation(operand1),wynik=operand1,wynik=wynik.toFixed(4),wynik=wynik.toString();"0"==wynik.charAt(wynik.length-1);)wynik=wynik.substring(0,wynik.length-1);"."==wynik.charAt(wynik.length-1)&&(wynik=wynik.substring(0,wynik.length-1)),operand1=wynik,toEval=toEval.substring(0,toEval.length-n),toEval+=operand1,result.value=mask(operand1),sum.textContent=sum.textContent.substring(0,sum.textContent.length-o),sum.textContent+=operand1}}}},i=0;i<button.length;i++)button[i].addEventListener("click",function(e){for(var t in TypeOfButton)this.classList.contains(TypeOfButton[t].type)&&TypeOfButton[t].action(e.target);classForAWhile(e.target,"active",300),console.log(operand1),console.log(toEval)},!1);var one=document.querySelector(".numbers[value='1']"),two=document.querySelector(".numbers[value='2']"),three=document.querySelector(".numbers[value='3']"),four=document.querySelector(".numbers[value='4']"),five=document.querySelector(".numbers[value='5']"),six=document.querySelector(".numbers[value='6']"),seven=document.querySelector(".numbers[value='7']"),eight=document.querySelector(".numbers[value='8']"),nine=document.querySelector(".numbers[value='9']"),zero=document.querySelector(".numbers[value='0']"),del=document.querySelector(".clear"),add=document.querySelector(".operations[value='+']"),subt=document.querySelector(".operations[value='-']"),divis=document.querySelector(".operations[value='/']"),multi=document.querySelector(".operations[value='*']"),equal=document.querySelector(".score[value='=']"),dot=document.querySelector(".numbers[value='.']"),oneDigit=document.querySelector(".deleteOneDigit");document.addEventListener("keydown",function(e){switch(e.key){case"1":one.click();break;case"2":two.click();break;case"3":three.click();break;case"4":four.click();break;case"5":five.click();break;case"6":six.click();break;case"7":seven.click();break;case"8":eight.click();break;case"9":nine.click();break;case"0":zero.click();break;case"Delete":del.click();break;case"+":add.click();break;case"-":subt.click();break;case"/":divis.click();break;case"*":multi.click();break;case"Enter":equal.click();break;case",":case".":dot.click();break;case"Backspace":oneDigit.click()}})}();